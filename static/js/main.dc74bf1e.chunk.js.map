{"version":3,"sources":["components/resultPopup.js","components/resultGrid.js","utils/queryPinterest.js","components/imageComponent.js","components/form.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","root","maxWidth","media","height","paddingTop","backdrop","zIndex","drawer","color","ResultPopUp","props","classes","useState","open","setOpen","src","item","image_square_url","alt","onClick","Backdrop","className","Card","CardMedia","component","image","image_large_url","CardContent","Typography","description","domain","Link","href","link","display","flexWrap","overflow","backgroundColor","palette","background","paper","ImageGridList","data","map","id","searchHeaders","formData","authority","_boundary","accept","searchPinterest","a","axios","method","url","headers","result","width","position","marginLeft","box","img","ImageComponent","useDimensions","ref","dimensions","startX","startY","endX","endY","pos","setPos","bind","useDrag","args","down","movement","movX","movY","offset","initial","initX","initY","x","y","setSearchArgs","Math","min","w","abs","h","delay","style","touchAction","left","top","Main","setImage","xywh","setXywh","isReadingImg","setIsReadingImg","isSearching","setIsSearching","searchResult","setSearchResult","fileInput","React","createRef","type","name","onChange","fileToUpload","current","files","fileReader","FileReader","onloadstart","onloadend","onerror","e","console","error","readAsDataURL","FormData","imageBlob","dataurl","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","dataURLtoBlob","append","toString","then","resultData","catch","err","debug","right","App","debugMsg","setDebugMsg","onLoad","msg","log","openCvPath","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc74bf1e.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\n\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport { Link } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n\t},\r\n\tbackdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n  // expand: {\r\n  //   transform: 'rotate(0deg)',\r\n  //   marginLeft: 'auto',\r\n  //   transition: theme.transitions.create('transform', {\r\n  //     duration: theme.transitions.duration.shortest,\r\n  //   }),\r\n  // },\r\n  // expandOpen: {\r\n  //   transform: 'rotate(180deg)',\r\n  // },\r\n  // avatar: {\r\n  //   backgroundColor: red[500],\r\n  // },\r\n}));\r\n\r\nexport default function ResultPopUp(props){\r\n\tconst classes = useStyles();\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<img src={props.item.image_square_url} alt=\"\" onClick={handleToggle}/>\r\n\t\t\t<Backdrop className={classes.backdrop} open={open} onClick={handleClose}>\r\n\t\t\t\t<Card className={classes.root}>\r\n\t\t\t\t\t<CardMedia\r\n\t\t\t\t\t\tcomponent=\"img\"\r\n\t\t\t\t\t\t// className={classes.media}\r\n\t\t\t\t\t\timage={props.item.image_large_url}\r\n\t\t\t\t\t\t// title=\"Paella dish\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<Typography>{props.item.description}</Typography>\r\n\t\t\t\t\t\t<Typography>{props.item.domain}</Typography>\r\n\t\t\t\t\t\t<Link href={props.item.link}>{props.item.link}</Link>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t</Card>\r\n\t\t\t</Backdrop>\r\n\t\t</>\r\n\t)\r\n}","import React from 'react';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\n// import GridList from '@material-ui/core/GridList';\r\n// import GridListTile from '@material-ui/core/GridListTile';\r\n\r\nimport ResultPopUp from \"./resultPopup\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    // justifyContent: 'space-around',\r\n    overflow: 'hidden',\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\t// maxWidth: \"80%\",\r\n  },\r\n  // gridList: {\r\n  //   width: 500,\r\n  //   // height: 450,\r\n  // },\r\n}));\r\n\r\n\r\nexport default function ImageGridList(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* <GridList cellHeight={160} className={classes.gridList} cols={3}>\r\n        {props.data.map((item) => (\r\n          <GridListTile key={item.id} cols={1}>\r\n            <ResultPopUp item={item}/>\r\n          </GridListTile>\r\n        ))}\r\n      </GridList> */}\r\n\t\t\t{props.data.map((item)=>{\r\n\t\t\t\t\treturn <ResultPopUp item={item} key={item.id}/>\r\n\t\t\t})}\r\n    </div>\r\n  );\r\n}","import axios from \"axios\";\r\n\r\nconst searchHeaders = (formData) => {\r\n\treturn {\r\n\t\tauthority: \"api.pinterest.com\",\r\n\t\t\"Content-Type\": `multipart/form-data; boundary=${formData._boundary}`,\r\n\t\t// charset: \"UTF-8\",\r\n\t\taccept: \"*/*\",\r\n\t}\r\n};\r\n\r\nconst cors = \"https://cors-anywhere.herokuapp.com/\";\r\n// const cors = \"\";\r\n\r\nconst searchPinterest = async (formData) => {\r\n\tconst result = await axios({\r\n\t\tmethod: \"put\",\r\n\t\turl: `${cors}https://api.pinterest.com/v3/visual_search/extension/image/`,\r\n\t\t// headers: {...searchHeaders(formData), ...formData.getHeaders()},\r\n\t\theaders: searchHeaders(formData),\r\n\t\tdata: formData,\r\n\t})\r\n\t\r\n\treturn result;\r\n};\r\n\r\nexport {searchPinterest};","import React, {useState} from \"react\";\r\nimport { useDrag } from \"react-use-gesture\";\r\nimport useDimensions from \"react-use-dimensions\";\r\nimport makeStyles from \"@material-ui/styles/makeStyles\";\r\n\r\nconst maxWidth = 300;\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n\t\twidth: maxWidth,\r\n\t\tposition: \"relative\",\r\n\t\tbackgroundColor: \"rgb(0,0,0,0.5)\",\t\r\n\t\tmarginLeft:50,\r\n\t},\r\n\tbox: {\r\n\t\tposition: \"absolute\",\r\n\t\tbackgroundColor: \"rgba(0,155,0,0.5)\",\r\n\t},\r\n\timg: {\r\n\t\t\"-webkit-user-drag\": \"none\",\r\n\t\t\"-khtml-user-drag\": \"none\",\r\n\t\t\"-moz-user-drag\": \"none\",\r\n\t\t\"-o-user-drag\": \"none\",\r\n\t\t\"user-drag\": \"none\",\r\n\t\tmaxWidth: maxWidth,\r\n\t}\r\n})\r\n\r\nexport default function ImageComponent(props){\r\n\tconst classes = useStyles();\r\n\tconst [ref, dimensions] = useDimensions();\r\n\r\n\tconst [pos, setPos] = useState({\r\n\t\t\tstartX: 0,\r\n\t\t\tstartY: 0,\r\n\t\t\tendX: 0,\r\n\t\t\tendY: 0,\r\n\t\t});\r\n\r\n\t\r\n\tconst bind = useDrag(({ args: [dimensions], down, movement: [movX, movY], offset: [offX, offY], initial: [initX, initY] }) => {\r\n\t\t\t// console.log(\"init\", initX, initY);\r\n\t\t\t// console.log(\"mov\", movX, movY);\r\n\t\t\t// console.log(\"off\", offX, offY);\r\n\r\n\t\t\tlet startX = initX - dimensions.x;\r\n\t\t\tlet startY = initY - dimensions.y;\r\n\r\n\t\t\tlet endX = initX - dimensions.x + movX;\r\n\t\t\tlet endY = initY - dimensions.y + movY;\r\n\r\n\t\t\tif (endX < 0){\r\n\t\t\t\tendX = 0;\r\n\t\t\t}\r\n\t\t\telse if (endX > dimensions.width ){\r\n\t\t\t\tendX = dimensions.width;\r\n\t\t\t}\r\n\r\n\t\t\tif (endY < 0){\r\n\t\t\t\tendY = 0;\r\n\t\t\t}\r\n\t\t\telse if (endY > dimensions.height){\r\n\t\t\t\tendY = dimensions.height;\r\n\t\t\t}\r\n\r\n\t\t\tsetPos({\r\n\t\t\t\tstartX: startX,\r\n\t\t\t\tstartY: startY,\r\n\t\t\t\tendX: endX,\r\n\t\t\t\tendY: endY\r\n\t\t\t});\r\n\r\n\t\t\tprops.setSearchArgs({\r\n\t\t\t\tx: Math.min(startX, endX) / dimensions.width,\r\n\t\t\t\ty: Math.min(startY, endY) / dimensions.height,\r\n\t\t\t\tw: Math.abs(startX - endX) / dimensions.width,\r\n\t\t\t\th: Math.abs(startY - endY) / dimensions.height\r\n\t\t\t})\r\n\t\t},\r\n\t\t// options\r\n\t\t{ \r\n\t\t\tdelay: true, // allowing click for generated div\r\n\t\t\t// bounds: { left: 0, right: dimensions.width, top: 0, bottom: dimensions.height },\r\n\t\t}, \r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root} ref={ref} {...bind(dimensions)} style={{touchAction: \"none\"}}>\r\n\t\t\t\t<img className={classes.img} alt=\"\" src={props.image}/>\r\n\t\t\t\t{Math.abs(pos.startX - pos.endX) * Math.abs(pos.startY - pos.endY) > 0 ? (<div \r\n\t\t\t\t\tclassName={classes.box} \r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: Math.abs(pos.startX - pos.endX), \r\n\t\t\t\t\t\theight: Math.abs(pos.startY - pos.endY),\r\n\t\t\t\t\t\tleft: Math.min(pos.startX, pos.endX),\r\n\t\t\t\t\t\ttop: Math.min(pos.startY, pos.endY),\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t// onClick={e=>console.log(\"clicked\")}\r\n\t\t\t\t/>) : null}\r\n\t\t\t</div>\r\n\t)\t\r\n}\r\n","import React, {useState} from \"react\";\r\n\r\nimport ImageGridList from \"./resultGrid\";\r\nimport {searchPinterest} from \"../utils/queryPinterest\";\r\nimport ImageComponent from \"./imageComponent\";\r\n\r\nfunction dataURLtoBlob(dataurl) {\r\n\tvar arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n\t\t\tbstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n\twhile(n--){\r\n\t\t\tu8arr[n] = bstr.charCodeAt(n);\r\n\t}\r\n\treturn new Blob([u8arr], {type:mime});\r\n}\r\n\r\n\r\nexport default function Main(props){\r\n\tconst [image, setImage] = useState(null);\r\n\tconst [xywh, setXywh] = useState({x: 0, y: 0, w: 1, h: 1});\r\n\tconst [isReadingImg, setIsReadingImg] = useState(false);\r\n\tconst [isSearching, setIsSearching] = useState(false);\r\n\tconst [searchResult, setSearchResult] = useState(null);\r\n\r\n\tconst fileInput = React.createRef();\r\n\r\n\tconst handleLoad = () => {\r\n\t\tconst fileToUpload = fileInput.current.files[0];\r\n\r\n\t\tconst fileReader = new FileReader();\r\n\r\n\t\tfileReader.onloadstart = async () => {\r\n\t\t\t// console.log(fileToUpload);\r\n\t\t\tsetIsReadingImg(true);\r\n\t\t}\r\n\r\n\t\tfileReader.onloadend = async () => {\r\n\t\t\tsetImage(fileReader.result);\r\n\t\t\t// console.log(fileReader.result)\r\n\t\t\tsetIsReadingImg(false);\r\n\t\t}\r\n\t\tfileReader.onerror = function (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tsetIsReadingImg(false);\r\n\t\t};\r\n\r\n\t\t// Read content - base 64\r\n\t\tfileReader.readAsDataURL(fileToUpload);\r\n\t};\r\n\r\n\tconst handleSearch = () => {\r\n\t\t// prepare form data\r\n\t\tlet formData = new FormData();\r\n\t\tconst fileToUpload = fileInput.current.files[0];\r\n\t\tconst imageBlob = dataURLtoBlob(image);\r\n\t\tformData.append(\"image\", imageBlob, fileToUpload.name);\r\n\t\t// formData.append(\"x\", \"0\");\r\n\t\t// formData.append(\"y\", \"0\");\r\n\t\t// formData.append(\"w\", \"1.0\");\r\n\t\t// formData.append(\"h\", \"1.0\");\r\n\t\tformData.append(\"x\", xywh.x.toString());\r\n\t\tformData.append(\"y\", xywh.y.toString());\r\n\t\tformData.append(\"w\", xywh.w.toString());\r\n\t\tformData.append(\"h\", xywh.h.toString());\r\n\r\n\t\t// for (let key of formData.entries()) {\r\n\t\t// \tconsole.log(key[0] + ', ' + key[1]);\r\n\t\t// }\r\n\r\n\t\tsetIsSearching(true);\r\n\t\tconst result = searchPinterest(formData);\r\n\t\tresult.then(resultData => {\r\n\t\t\t// console.log(resultData);\r\n\t\t\tsetSearchResult(resultData.data);\r\n\t\t\tsetIsSearching(false);\r\n\t\t}).catch(err => {\r\n\t\t\tsetIsSearching(false);\r\n\t\t});\r\n\r\n\t\t\t\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<input type=\"file\" id=\"myfile\" name=\"myfile\" ref={fileInput} onChange={handleLoad}/>\r\n\t\t\t{isReadingImg ? <div>...Loading</div> : null}\r\n\t\t\t<div>\r\n\t\t\t\t{image ? <div>\r\n\t\t\t\t\t<ImageComponent image={image} setSearchArgs={setXywh}/>\r\n\t\t\t\t\t{isSearching ? <div>...Searching</div> : <button onClick={handleSearch}>Search</button>}\r\n\t\t\t\t</div> : \r\n\t\t\t\t<div>No image</div>}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div>Results:</div>\r\n\t\t\t\t{searchResult?.data ? <ImageGridList data={searchResult.data} /> : null }\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};","import React, {useState} from \"react\";\nimport FormComponent from \"./components/form\";\nimport {OpenCvProvider} from \"opencv-react\";\nimport makeStyles from \"@material-ui/styles/makeStyles\";\n\nconst VERSION_NUMBER = \"4.5.1\";\nconst DEBUG_MODE = true;\n\nconst useStyles = makeStyles({\n  debug: {\t\t\n\t\tposition: \"fixed\",\n\t\tbackgroundColor: \"rgb(0,0,255,0.5)\",\t\n    top: 0,\n    right: 0,\n    width: 200,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n\n  const [debugMsg, setDebugMsg] = useState(\"\");\n  const onLoaded = () => {\n    const msg = \"OpenCV loaded\"\n    setDebugMsg(msg);\n    console.log(msg);\n  }\n\n  return (\n    <>\n      <OpenCvProvider onLoad={onLoaded} openCvPath={`https://docs.opencv.org/${VERSION_NUMBER}/opencv.js`}>\n        <FormComponent/>\n      </OpenCvProvider>\n      {DEBUG_MODE ? <div className={classes.debug}>{debugMsg}</div> : null}\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}