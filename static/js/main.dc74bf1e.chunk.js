(this.webpackJsonppinterest_search=this.webpackJsonppinterest_search||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),i=n(14),o=n.n(i),s=(n(84),n(8)),d=n(15),u=n.n(d),j=n(30),b=n(38),h=n.n(b),l=n(149),p=n(151),O=n(147),m=n(148),g=n(150),f=n(152),x=h()((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function v(e){var t=x(),n=Object(r.useState)(!1),c=Object(s.a)(n,2),i=c[0],o=c[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:e.item.image_square_url,alt:"",onClick:function(){o(!i)}}),Object(a.jsx)(g.a,{className:t.backdrop,open:i,onClick:function(){o(!1)},children:Object(a.jsxs)(p.a,{className:t.root,children:[Object(a.jsx)(O.a,{component:"img",image:e.item.image_large_url}),Object(a.jsxs)(m.a,{children:[Object(a.jsx)(l.a,{children:e.item.description}),Object(a.jsx)(l.a,{children:e.item.domain}),Object(a.jsx)(f.a,{href:e.item.link,children:e.item.link})]})]})})]})}var w=h()((function(e){return{root:{display:"flex",flexWrap:"wrap",overflow:"hidden",backgroundColor:e.palette.background.paper}}}));function y(e){var t=w();return Object(a.jsx)("div",{className:t.root,children:e.data.map((function(e){return Object(a.jsx)(v,{item:e},e.id)}))})}var k=n(72),S=n.n(k),C=function(e){return{authority:"api.pinterest.com","Content-Type":"multipart/form-data; boundary=".concat(e._boundary),accept:"*/*"}},M=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({method:"put",url:"".concat("https://cors-anywhere.herokuapp.com/","https://api.pinterest.com/v3/visual_search/extension/image/"),headers:C(t),data:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=n(53),Y=n(74),F=n(73),N=n(135),_=Object(N.a)({root:{width:300,position:"relative",backgroundColor:"rgb(0,0,0,0.5)",marginLeft:50},box:{position:"absolute",backgroundColor:"rgba(0,155,0,0.5)"},img:{"-webkit-user-drag":"none","-khtml-user-drag":"none","-moz-user-drag":"none","-o-user-drag":"none","user-drag":"none",maxWidth:300}});function A(e){var t=_(),n=Object(F.a)(),c=Object(s.a)(n,2),i=c[0],o=c[1],d=Object(r.useState)({startX:0,startY:0,endX:0,endY:0}),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(Y.a)((function(t){var n=Object(s.a)(t.args,1)[0],a=(t.down,Object(s.a)(t.movement,2)),r=a[0],c=a[1],i=Object(s.a)(t.offset,2),o=(i[0],i[1],Object(s.a)(t.initial,2)),d=o[0],u=o[1],j=d-n.x,h=u-n.y,l=d-n.x+r,p=u-n.y+c;l<0?l=0:l>n.width&&(l=n.width),p<0?p=0:p>n.height&&(p=n.height),b({startX:j,startY:h,endX:l,endY:p}),e.setSearchArgs({x:Math.min(j,l)/n.width,y:Math.min(h,p)/n.height,w:Math.abs(j-l)/n.width,h:Math.abs(h-p)/n.height})}),{delay:!0});return Object(a.jsxs)("div",Object(X.a)(Object(X.a)({className:t.root,ref:i},h(o)),{},{style:{touchAction:"none"},children:[Object(a.jsx)("img",{className:t.img,alt:"",src:e.image}),Math.abs(j.startX-j.endX)*Math.abs(j.startY-j.endY)>0?Object(a.jsx)("div",{className:t.box,style:{width:Math.abs(j.startX-j.endX),height:Math.abs(j.startY-j.endY),left:Math.min(j.startX,j.endX),top:Math.min(j.startY,j.endY)}}):null]}))}function L(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),i=n[0],o=n[1],d=Object(r.useState)({x:0,y:0,w:1,h:1}),b=Object(s.a)(d,2),h=b[0],l=b[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),m=O[0],g=O[1],f=Object(r.useState)(!1),x=Object(s.a)(f,2),v=x[0],w=x[1],k=Object(r.useState)(null),S=Object(s.a)(k,2),C=S[0],X=S[1],Y=c.a.createRef();return Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"file",id:"myfile",name:"myfile",ref:Y,onChange:function(){var e=Y.current.files[0],t=new FileReader;t.onloadstart=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(!0);case 1:case"end":return e.stop()}}),e)}))),t.onloadend=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t.result),g(!1);case 2:case"end":return e.stop()}}),e)}))),t.onerror=function(e){console.error(e),g(!1)},t.readAsDataURL(e)}}),m?Object(a.jsx)("div",{children:"...Loading"}):null,Object(a.jsx)("div",{children:i?Object(a.jsxs)("div",{children:[Object(a.jsx)(A,{image:i,setSearchArgs:l}),v?Object(a.jsx)("div",{children:"...Searching"}):Object(a.jsx)("button",{onClick:function(){var e=new FormData,t=Y.current.files[0],n=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),r=a.length,c=new Uint8Array(r);r--;)c[r]=a.charCodeAt(r);return new Blob([c],{type:n})}(i);e.append("image",n,t.name),e.append("x",h.x.toString()),e.append("y",h.y.toString()),e.append("w",h.w.toString()),e.append("h",h.h.toString()),w(!0),M(e).then((function(e){X(e.data),w(!1)})).catch((function(e){w(!1)}))},children:"Search"})]}):Object(a.jsx)("div",{children:"No image"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Results:"}),(null===C||void 0===C?void 0:C.data)?Object(a.jsx)(y,{data:C.data}):null]})]})}var I=n(75),R=Object(N.a)({debug:{position:"fixed",backgroundColor:"rgb(0,0,255,0.5)",top:0,right:0,width:200}});var T=function(){var e=R(),t=Object(r.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{onLoad:function(){var e="OpenCV loaded";i(e),console.log(e)},openCvPath:"https://docs.opencv.org/".concat("4.5.1","/opencv.js"),children:Object(a.jsx)(L,{})}),Object(a.jsx)("div",{className:e.debug,children:c})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,153)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),z()},84:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.dc74bf1e.chunk.js.map